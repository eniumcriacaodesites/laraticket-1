{"version":3,"sources":["app.js","ticket.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$(document).ready(function(){\r\n    $('.datatable').dynatable();\r\n    $('.chosen-select').chosen();\r\n    $(\".form-confirm-delete\").submit(function() {\r\n        var deleteName = $('.delete-name',this).val();\r\n        var c = confirm(\"Are you sure you want to delete \"+deleteName+\"?\");\r\n        return c;\r\n    });\r\n});","$(document).ready(function(){\r\n    $('.ticket-message-form').on('submit', function(e) {\r\n        e.preventDefault();  //prevent form from submitting\r\n        var actionURL = $(this).attr('action');\r\n        var message = $('[name=\"message\"]',this).val();\r\n        var token = $('[name=\"_token\"]',this).val();\r\n        var ticketId = $(this).data('ticket-id');\r\n        var response = ajaxCreateTicketMessage(actionURL, ticketId, message, token);\r\n    });\r\n    function ajaxCreateTicketMessage(actionURL, ticketId, message, token){\r\n        $.ajax({\r\n            url: actionURL,\r\n            type: 'PUT',\r\n            data: {'_token': token, 'message': message},\r\n            dataType: 'JSON',\r\n            success: function (data) {\r\n                //console.log(data);\r\n                //console.log(ticketId);\r\n                ajaxRefreshTicket(ticketId);\r\n            }\r\n        });\r\n    }\r\n    function ajaxRefreshTicket(ticketId){\r\n        $.ajax({\r\n            url: 'tickets/show/'+ticketId+'',\r\n            type: 'GET',\r\n            dataType: 'JSON',\r\n            success: function (data) {\r\n                refreshTicket(data.ticket);\r\n            }\r\n        });\r\n    }\r\n    function refreshTicket(ticket){\r\n        //messages\r\n        refreshTicketMessages(ticket, ticket.ticketLogs);\r\n    }\r\n    function refreshTicketMessages(ticket, messages){\r\n        $('.panel-ticket-'+ticket.id+' .logs .log').remove();\r\n        $('.panel-ticket-'+ticket.id+' .log-form [name=\"message\"]').val('');\r\n        for(var i=0;i<messages.length;i++){\r\n            var logHTML = '<div class=\"log list-group-item\">';\r\n            logHTML += '<p><small class=\"label label-default\"><strong>'+messages[i].created_at+'</strong> - '+messages[i].user.email+'</small></p>';\r\n            logHTML += messages[i].message;\r\n            logHTML += '</div>';\r\n            $('.panel-ticket-'+ticket.id+' .logs').append(logHTML);\r\n        }\r\n    }\r\n});"],"sourceRoot":"/source/"}